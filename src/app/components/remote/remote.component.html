<div class="remote-container">
  <!-- Header avec breadcrumb -->
  <div class="remote-header">
    <div class="header-content">
      <div class="header-left">
        @if (breadcrumb.length > 1) {
          <button class="back-button" (click)="handleBack()">
            <span class="back-icon">‚Üê</span>
          </button>
        }
        <div class="header-title-section">
          <h1 class="header-title">{{ breadcrumb[breadcrumb.length - 1] }}</h1>
          @if (breadcrumb.length > 1) {
            <div class="breadcrumb-path">
              @for (item of breadcrumb.slice(0, -1); track item; let i = $index) {
                <span>{{ item }}</span>
                @if (i < breadcrumb.length - 2) {
                  <span>/</span>
                }
              }
            </div>
          }
        </div>
      </div>
    </div>
  </div>

  <div class="remote-content">
    <!-- Vue principale - Accueil -->
    @if (currentView === 'home') {
      <div class="view-home">
        <!-- Actions rapides -->
        <div class="quick-actions">
          <button class="quick-action sponsors-action" (click)="launchSponsors()">
            <span class="action-icon">üë•</span>
            <div class="action-content">
              <div class="action-title">Boucle partenaires</div>
              <div class="action-subtitle">Lancer la rotation automatique</div>
            </div>
          </button>

          <button class="quick-action program-action">
            <span class="action-icon">‚ñ∂Ô∏è</span>
            <div class="action-content">
              <div class="action-title">Mode Programmation</div>
              <div class="action-subtitle">Playlist automatique</div>
            </div>
          </button>
        </div>

        <!-- Cat√©gories par temps -->
        <div class="time-categories-section">
          <h2 class="section-title">Organisation par temps</h2>
          <div class="time-categories-grid">
            @for (timeCategory of timeCategories; track timeCategory.name) {
              <button
                class="time-category-card"
                [ngClass]="timeCategory.color"
                (click)="selectTimeCategory(timeCategory)"
              >
                <div class="card-header">
                  <span class="card-icon">{{ timeCategory.icon }}</span>
                  <span class="card-arrow">‚Üí</span>
                </div>
                <h3 class="card-title">{{ timeCategory.name }}</h3>
                <p class="card-description">{{ timeCategory.description }}</p>
                <div class="card-footer">
                  <span class="card-stats">
                    {{ getTotalCategoriesForTimeCategory(timeCategory) }} cat√©gories ‚Ä¢
                    {{ getTotalVideosForTimeCategory(timeCategory) }} vid√©os
                  </span>
                </div>
              </button>
            }
          </div>
        </div>
      </div>
    }

    <!-- Vue cat√©gories d'un temps -->
    @if (currentView === 'time-categories' && selectedTimeCategory) {
      <div class="view-categories">
        <div class="categories-grid">
          @for (category of getCategoriesForTimeCategory(selectedTimeCategory); track category.name) {
            <button
              class="category-card"
              (click)="selectCategory(category)"
            >
              <div class="category-icon-wrapper">
                <span class="category-icon">üìÅ</span>
              </div>
              <div class="category-info">
                <h3 class="category-title">{{ category.name }}</h3>
                <div class="category-meta">
                  @if (getSubCategoriesCount(category) > 0) {
                    <span>
                      {{ getSubCategoriesCount(category) }} sous-cat√©gorie{{ getSubCategoriesCount(category) > 1 ? 's' : '' }}
                    </span>
                  }
                  @if (getSubCategoriesCount(category) > 0 && getVideosCount(category) > 0) {
                    <span> ‚Ä¢ </span>
                  }
                  @if (getVideosCount(category) > 0) {
                    <span>
                      {{ getVideosCount(category) }} vid√©o{{ getVideosCount(category) > 1 ? 's' : '' }}
                    </span>
                  }
                </div>
              </div>
              <span class="category-arrow">‚Üí</span>
            </button>
          }
        </div>
      </div>
    }

    <!-- Vue sous-cat√©gories -->
    @if (currentView === 'subcategories' && selectedCategory) {
      <div class="view-subcategories">
        <div class="subcategories-grid">
          @for (subCategory of selectedCategory.subCategories; track subCategory.name) {
            <button
              class="subcategory-card"
              (click)="selectSubCategory(subCategory)"
            >
              <div class="subcategory-icon-wrapper">
                <span class="subcategory-icon">üìÅ</span>
              </div>
              <div class="subcategory-info">
                <h3 class="subcategory-title">{{ subCategory.name }}</h3>
                <div class="subcategory-meta">
                  {{ subCategory.videos?.length || 0 }} vid√©o{{ (subCategory.videos?.length || 0) > 1 ? 's' : '' }}
                </div>
              </div>
            </button>
          }
        </div>
      </div>
    }

    <!-- Vue vid√©os -->
    @if (currentView === 'videos') {
      <div class="view-videos">
        <div class="videos-list">
          @for (video of getCurrentVideos(); track video.path) {
            <button
              class="video-card"
              (click)="launchVideo(video)"
            >
              <div class="video-icon-wrapper">
                <span class="video-icon">üé¨</span>
              </div>
              <div class="video-info">
                <h3 class="video-title">{{ video.name }}</h3>
                <span class="video-path">{{ video.path }}</span>
              </div>
              <span class="video-arrow">‚Üí</span>
            </button>
          }
        </div>
      </div>
    }
  </div>
</div>
