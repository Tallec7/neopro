#  use api_key instead of api_key_hash to match Supabase

**Commit:** `8d5b7b82b1a302e21ef03f1c5dc4fcfdffbe99ec`
**Date:** 2025-12-06
**Auteur:** Tallec7
**Type:** fix

## Description

The Supabase table uses api_key (plain text) not api_key_hash.
Updated all references:
- sites.controller.ts: store/retrieve api_key directly
- socket.service.ts: compare api_key directly (still timing-safe)
- types/index.ts: Site interface uses api_key
- init-db.sql: column is now api_key VARCHAR(255)
ü§ñ Generated with [Claude Code](https://claude.com/claude-code)
Co-Authored-By: Claude <noreply@anthropic.com>

## Fichiers modifi√©s

```
central-server/src/controllers/sites.controller.ts
central-server/src/scripts/init-db.sql
central-server/src/services/socket.service.ts
central-server/src/types/index.ts
```

---
[‚Üê Retour au changelog](../CHANGELOG.md)

